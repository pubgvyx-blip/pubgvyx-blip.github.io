<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>KRAKEN UC SHOP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  background: radial-gradient(circle at top, #0f1020, #050510);
  color:white;
}

header {
  padding:20px;
  font-size:28px;
  font-weight:bold;
  text-align:center;
  background: linear-gradient(90deg,#6a00ff,#ff0077);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.section {
  margin:30px;
  padding:20px;
  background:rgba(255,255,255,0.05);
  border-radius:15px;
  box-shadow:0 0 25px rgba(140,0,255,0.3);
}

.products {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
}

.card {
  padding:20px;
  border-radius:15px;
  background:linear-gradient(145deg,#12122a,#1c1c3a);
  box-shadow:0 0 15px rgba(255,0,150,0.3);
  transition:0.3s;
}

.card:hover {
  transform:scale(1.05);
  box-shadow:0 0 30px rgba(255,0,200,0.6);
}

button {
  padding:10px 15px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:linear-gradient(90deg,#6a00ff,#ff0077);
  color:white;
  font-weight:bold;
}

input, textarea {
  width:100%;
  padding:8px;
  margin:5px 0;
  border-radius:6px;
  border:none;
}

.admin-panel {
  display:none;
  margin-top:20px;
  padding:15px;
  background:rgba(255,0,0,0.1);
  border:1px solid red;
  border-radius:10px;
}
.review {
  margin:10px 0;
  padding:10px;
  background:rgba(255,255,255,0.05);
  border-radius:8px;
}
.delete-btn {
  background:red;
  margin-left:10px;
}
</style>
</head>
<body>

<header>KRAKEN UC SHOP üíé</header>

<div class="section">
<h2>üî• –ö–∞—Ç–∞–ª–æ–≥ UC</h2>
<div class="products" id="productList"></div>
</div>

<div class="section">
<h2>üîê –í—Ö–æ–¥</h2>
<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å">
<button onclick="login()">–í–æ–π—Ç–∏</button>
<button onclick="register()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
</div>

<div class="section">
<h2>‚≠ê –û—Ç–∑—ã–≤—ã</h2>
<textarea id="reviewText" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤..."></textarea>
<button onclick="addReview()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
<div id="reviews"></div>
</div>

<div class="section admin-panel" id="adminPanel">
<h2>üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
<p>–í—ã –≤–æ—à–ª–∏ –∫–∞–∫ –∞–¥–º–∏–Ω</p>
<div id="adminControls"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } 
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } 
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAdE6pSRtNx9AlEFR2UrFO87_fpFXLg9C4",
  authDomain: "krakenuc-dc537.firebaseapp.com",
  projectId: "krakenuc-dc537",
  storageBucket: "krakenuc-dc537.firebasestorage.app",
  messagingSenderId: "814916661220",
  appId: "1:814916661220:web:1f4a7e050c390f9c27e1f1"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const adminEmail = "admin@gmail.com"; // —Ç–≤–æ–π –∞–¥–º–∏–Ω email

const products = [
  {name:"60 UC", price:"1.99$"},
  {name:"325 UC", price:"4.99$"},
  {name:"660 UC", price:"9.99$"},
  {name:"1800 UC", price:"24.99$"}
];

function renderProducts() {
  const list = document.getElementById("productList");
  list.innerHTML="";
  products.forEach((p,i)=>{
    list.innerHTML += `
      <div class="card">
        <h3>${p.name}</h3>
        <p>${p.price}</p>
        <button onclick="alert('–ü–æ–∫—É–ø–∫–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">–ö—É–ø–∏—Ç—å</button>
        <button class="delete-btn" onclick="deleteProduct(${i})">–£–¥–∞–ª–∏—Ç—å</button>
      </div>`;
  });
}
renderProducts();

window.deleteProduct = function(i){
  if(currentUserEmail===adminEmail){
    products.splice(i,1);
    renderProducts();
  }
}

window.register = async function(){
  await createUserWithEmailAndPassword(auth,
    document.getElementById("email").value,
    document.getElementById("password").value
  );
}

window.login = async function(){
  await signInWithEmailAndPassword(auth,
    document.getElementById("email").value,
    document.getElementById("password").value
  );
}

let currentUserEmail=null;

onAuthStateChanged(auth, user=>{
  if(user){
    currentUserEmail=user.email;
    if(user.email===adminEmail){
      document.getElementById("adminPanel").style.display="block";
    }
  }
});

window.addReview = async function(){
  const text = document.getElementById("reviewText").value;
  await addDoc(collection(db,"reviews"),{
    text:text,
    user:currentUserEmail
  });
  loadReviews();
}

async function loadReviews(){
  const querySnapshot = await getDocs(collection(db,"reviews"));
  const reviewsDiv=document.getElementById("reviews");
  reviewsDiv.innerHTML="";
  querySnapshot.forEach((docu)=>{
    const data=docu.data();
    reviewsDiv.innerHTML+=`
    <div class="review">
      <b>${data.user}</b>: ${data.text}
      ${currentUserEmail===adminEmail?
      `<button class="delete-btn" onclick="deleteReview('${docu.id}')">X</button>`:""}
    </div>`;
  });
}
loadReviews();

window.deleteReview = async function(id){
  if(currentUserEmail===adminEmail){
    await deleteDoc(doc(db,"reviews",id));
    loadReviews();
  }
}
</script>

</body>
</html>
