<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KRAKEN UC SHOP</title>

<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>

<style>
body {
    margin:0;
    font-family: Arial;
    background: linear-gradient(135deg,#0f0f1b,#1c1c2e);
    color:white;
}

h1 {
    text-align:center;
    padding:20px;
}

.container {
    max-width:1100px;
    margin:auto;
    padding:20px;
}

.card {
    background:#1e1e2f;
    padding:20px;
    border-radius:15px;
    box-shadow:0 0 15px rgba(255,0,100,0.3);
    margin-bottom:20px;
}

.products {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:20px;
}

.product {
    background:#252540;
    padding:20px;
    border-radius:15px;
    text-align:center;
    transition:0.3s;
}

.product:hover {
    transform:scale(1.05);
    box-shadow:0 0 20px rgba(255,0,120,0.6);
}

button {
    background:#ff0066;
    border:none;
    padding:10px 20px;
    border-radius:10px;
    color:white;
    cursor:pointer;
}

button:hover {
    background:#ff3388;
}

input, textarea {
    width:100%;
    padding:10px;
    margin:5px 0;
    border-radius:8px;
    border:none;
}

.admin-panel {
    display:none;
}
</style>
</head>
<body>

<h1>KRAKEN UC SHOP</h1>

<div class="container">

<div class="card">
<h2>Вход</h2>
<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Пароль">
<button onclick="login()">Войти</button>
<button onclick="register()">Регистрация</button>
</div>

<div class="card">
<h2>UC PUBG</h2>
<div class="products">

<div class="product">
<h3>60 UC</h3>
<p>65 ₽</p>
<button onclick="buy('60 UC',65)">Купить</button>
</div>

</div>
</div>

<div class="card">
<h2>Добавить отзыв</h2>
<textarea id="reviewText" placeholder="Ваш отзыв"></textarea>
<button onclick="addReview()">Отправить</button>
</div>

<div class="card">
<h2>Отзывы</h2>
<div id="reviews"></div>
</div>

<div class="card admin-panel" id="adminPanel">
<h2>Админ-панель</h2>
<p>Удаление отзывов доступно</p>
</div>

</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAdE6pSRtNx9AlEFR2UrFO87_fpFXLg9C4",
  authDomain: "krakenuc-dc537.firebaseapp.com",
  projectId: "krakenuc-dc537",
  storageBucket: "krakenuc-dc537.firebasestorage.app",
  messagingSenderId: "814916661220",
  appId: "1:814916661220:web:1f4a7e050c390f9c27e1f1",
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

function register(){
    auth.createUserWithEmailAndPassword(
        email.value,
        password.value
    );
}

function login(){
    auth.signInWithEmailAndPassword(
        email.value,
        password.value
    );
}

auth.onAuthStateChanged(user=>{
    if(user){
        checkAdmin(user.uid);
    }
});

function checkAdmin(uid){
    db.collection("users").doc(uid).get().then(doc=>{
        if(doc.exists && doc.data().role==="admin"){
            document.getElementById("adminPanel").style.display="block";
        }
    });
}

function buy(name,price){
    alert("Заказ: "+name+" на "+price+" ₽ оформлен.");
}

function addReview(){
    db.collection("reviews").add({
        text:reviewText.value,
        date:Date.now()
    });
}

db.collection("reviews").orderBy("date","desc")
.onSnapshot(snapshot=>{
    reviews.innerHTML="";
    snapshot.forEach(doc=>{
        let div=document.createElement("div");
        div.innerHTML=doc.data().text;
        reviews.appendChild(div);
    });
});
</script>

</body>
</html>
